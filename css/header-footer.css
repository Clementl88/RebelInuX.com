/* ========== PROFESSIONAL HEADER STYLES ========== */
header {
  background: rgba(10, 10, 10, 0.95);
  padding: var(--spacing-sm) var(--spacing-md);
  position: sticky;
  top: 0;
  z-index: 1000;
  backdrop-filter: blur(20px) saturate(200%);
  -webkit-backdrop-filter: blur(20px) saturate(200%);
  border-bottom: 1px solid rgba(212, 167, 106, 0.2);
  background-image: 
    linear-gradient(rgba(10, 10, 10, 0.95), rgba(10, 10, 10, 0.95)),
    linear-gradient(90deg, 
      rgba(215, 77, 77, 0.25) 0%, 
      rgba(212, 167, 106, 0.25) 50%, 
      rgba(215, 77, 77, 0.25) 100%);
  background-origin: border-box;
  background-clip: padding-box, border-box;
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
}

/* Header scroll effect */
header.scrolled {
  background: rgba(5, 5, 5, 0.98);
  backdrop-filter: blur(30px) saturate(200%);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
  border-bottom-color: rgba(212, 167, 106, 0.3);
}

.header-container {
  max-width: 1400px;
  margin: 0 auto;
  display: flex;
  justify-content: space-between;
  align-items: center;
  position: relative;
  gap: var(--spacing-md);
}

/* ========== ENHANCED BRAND LOGO ========== */
.brand-link {
  display: flex;
  align-items: center;
  text-decoration: none;
  color: inherit;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  min-height: 44px;
  min-width: 44px;
  position: relative;
  flex-shrink: 0;
}

.brand-link:hover {
  transform: translateY(-2px);
}

.brand-link:hover .brand-logo {
  filter: drop-shadow(0 0 12px rgba(212, 167, 106, 0.4));
  border-color: var(--rebel-gold);
}

.brand-content {
  display: flex;
  align-items: center;
  gap: 12px;
  position: relative;
}

.brand-logo {
  height: 48px;
  width: 48px;
  border-radius: 12px;
  object-fit: contain;
  display: block;
  border: 2px solid rgba(212, 167, 106, 0.3);
  padding: 4px;
  background: rgba(0, 0, 0, 0.6);
  transition: all 0.3s ease;
  flex-shrink: 0;
}

/* Add pulse animation to logo */
@keyframes logoPulse {
  0% { 
    box-shadow: 0 0 0 0 rgba(212, 167, 106, 0.6); 
    transform: scale(1);
  }
  70% { 
    box-shadow: 0 0 0 10px rgba(212, 167, 106, 0); 
    transform: scale(1.05);
  }
  100% { 
    box-shadow: 0 0 0 0 rgba(212, 167, 106, 0); 
    transform: scale(1);
  }
}

.brand-logo:hover {
  animation: logoPulse 2s infinite;
  border-color: var(--rebel-gold);
}

.brand-text {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  justify-content: center;
}

.brand-title {
  font-size: 1.8rem;
  font-weight: 900;
  background: linear-gradient(90deg, 
    var(--rebel-red) 0%, 
    var(--rebel-gold) 50%, 
    var(--rebel-red) 100%);
  background-size: 200% auto;
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
  animation: shimmer 4s ease-in-out infinite;
  line-height: 1.1;
  white-space: nowrap;
}

@keyframes shimmer {
  0% { background-position: 0% center; }
  50% { background-position: 100% center; }
  100% { background-position: 0% center; }
}

.brand-subtitle {
  font-size: 0.8rem;
  color: var(--rebel-gold);
  font-weight: 600;
  letter-spacing: 1.2px;
  text-transform: uppercase;
  background: rgba(212, 167, 106, 0.15);
  padding: 3px 10px;
  border-radius: 20px;
  border: 1px solid rgba(212, 167, 106, 0.25);
  margin-top: 2px;
  white-space: nowrap;
}

/* ========== DESKTOP NAVIGATION ========== */
#nav-desktop {
  display: flex;
  gap: var(--spacing-sm);
  align-items: center;
  flex: 1;
  justify-content: center;
  margin: 0 var(--spacing-md);
}

/* Base nav link styles */
#nav-desktop a {
  padding: 10px 20px;
  border-radius: 30px;
  font-weight: 600;
  position: relative;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  min-height: 44px;
  min-width: 44px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  text-decoration: none;
  font-size: 0.95rem;
  letter-spacing: 0.3px;
  overflow: hidden;
  border: 1px solid transparent;
  background: rgba(255, 255, 255, 0.05);
}

/* Add subtle gradient border effect */
#nav-desktop a::before {
  content: '';
  position: absolute;
  top: -1px;
  left: -1px;
  right: -1px;
  bottom: -1px;
  background: linear-gradient(90deg, 
    var(--rebel-red), 
    var(--rebel-gold), 
    var(--rebel-red));
  border-radius: 30px;
  z-index: -1;
  opacity: 0;
  transition: opacity 0.3s ease;
}

#nav-desktop a:hover::before {
  opacity: 1;
}

/* Icon spacing with animation */
#nav-desktop a i {
  margin-right: 8px;
  transition: transform 0.3s ease;
  font-size: 0.9rem;
}

#nav-desktop a:hover i {
  transform: scale(1.15);
}

/* Enhanced Color-coded navigation with gradients */
.nav-trade {
  color: #FF6B35 !important;
  border-color: rgba(255, 107, 53, 0.4) !important;
  background: linear-gradient(135deg, 
    rgba(255, 107, 53, 0.08), 
    rgba(255, 107, 53, 0.03)) !important;
}

.nav-rewards {
  color: #9C27B0 !important;
  border-color: rgba(156, 39, 176, 0.4) !important;
  background: linear-gradient(135deg, 
    rgba(156, 39, 176, 0.08), 
    rgba(156, 39, 176, 0.03)) !important;
}

.nav-tokenomics {
  color: #00BCD4 !important;
  border-color: rgba(0, 188, 212, 0.4) !important;
  background: linear-gradient(135deg, 
    rgba(0, 188, 212, 0.08), 
    rgba(0, 188, 212, 0.03)) !important;
}

/* Enhanced hover effects with glow */
.nav-trade:hover {
  background: linear-gradient(135deg, 
    rgba(255, 107, 53, 0.2), 
    rgba(255, 107, 53, 0.1)) !important;
  box-shadow: 0 4px 15px rgba(255, 107, 53, 0.25);
  transform: translateY(-2px);
}

.nav-rewards:hover {
  background: linear-gradient(135deg, 
    rgba(156, 39, 176, 0.2), 
    rgba(156, 39, 176, 0.1)) !important;
  box-shadow: 0 4px 15px rgba(156, 39, 176, 0.25);
  transform: translateY(-2px);
}

.nav-tokenomics:hover {
  background: linear-gradient(135deg, 
    rgba(0, 188, 212, 0.2), 
    rgba(0, 188, 212, 0.1)) !important;
  box-shadow: 0 4px 15px rgba(0, 188, 212, 0.25);
  transform: translateY(-2px);
}

/* Active state with glow */
#nav-desktop a.active {
  background: linear-gradient(135deg, 
    rgba(212, 167, 106, 0.25), 
    rgba(215, 77, 77, 0.15)) !important;
  color: white !important;
  box-shadow: 0 4px 20px rgba(212, 167, 106, 0.25);
  border-color: var(--rebel-gold) !important;
  transform: translateY(-1px);
}

/* ========== DROPDOWN STYLES ========== */
.dropdown {
  position: relative;
  display: inline-block;
}

.dropbtn {
  background: linear-gradient(135deg, 
    rgba(255, 215, 0, 0.1), 
    rgba(255, 152, 0, 0.05));
  color: #FFD700 !important;
  padding: 10px 20px;
  border: 1px solid rgba(255, 215, 0, 0.4);
  cursor: pointer;
  font-family: inherit;
  font-size: 0.95rem;
  display: flex;
  align-items: center;
  gap: 8px;
  min-height: 44px;
  min-width: 44px;
  text-decoration: none;
  border-radius: 30px;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  letter-spacing: 0.3px;
  background-color: transparent;
}

.dropbtn i {
  margin-right: 6px;
  transition: transform 0.3s ease;
}

.dropbtn:hover i {
  transform: rotate(15deg);
}

/* Dropdown Arrow with animation */
.dropbtn .dropdown-arrow {
  display: inline-block;
  margin-left: 4px;
  font-size: 0.7em;
  transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

.dropdown.active .dropbtn .dropdown-arrow,
.dropbtn.active .dropdown-arrow {
  transform: rotate(180deg);
}

.dropbtn:hover {
  background: linear-gradient(135deg, 
    rgba(255, 215, 0, 0.2), 
    rgba(255, 215, 0, 0.1)) !important;
  box-shadow: 0 4px 15px rgba(255, 215, 0, 0.25);
  transform: translateY(-2px);
  border-color: var(--rebel-gold) !important;
}

.dropdown.active .dropbtn,
.dropbtn.active {
  background: linear-gradient(135deg, 
    rgba(255, 215, 0, 0.25), 
    rgba(255, 215, 0, 0.15)) !important;
  box-shadow: 0 4px 20px rgba(255, 215, 0, 0.3);
}

/* Professional dropdown content */
.dropdown-content {
  display: none;
  position: absolute;
  right: 0;
  background: rgba(15, 15, 15, 0.98);
  min-width: 240px;
  border: 1px solid rgba(212, 167, 106, 0.3);
  border-radius: 16px;
  z-index: 1001;
  padding: 8px 0;
  backdrop-filter: blur(20px) saturate(180%);
  box-shadow: 
    0 10px 40px rgba(0, 0, 0, 0.6),
    0 0 0 1px rgba(255, 255, 255, 0.05) inset;
  overflow: hidden;
  margin-top: 8px;
}

/* Add subtle gradient border */
.dropdown-content::before {
  content: '';
  position: absolute;
  top: -1px;
  left: -1px;
  right: -1px;
  bottom: -1px;
  background: linear-gradient(135deg, 
    rgba(212, 167, 106, 0.3), 
    rgba(215, 77, 77, 0.3));
  border-radius: 17px;
  z-index: -1;
  opacity: 0.5;
}

.dropdown-content a {
  color: rgba(255, 255, 255, 0.9) !important;
  padding: 14px 24px;
  text-decoration: none;
  display: flex;
  align-items: center;
  gap: 12px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
  min-height: 52px;
  font-size: 0.95rem;
  transition: all 0.25s ease;
  position: relative;
  overflow: hidden;
  margin: 0 8px;
  border-radius: 10px;
  background: transparent !important;
  border: none !important;
}

.dropdown-content a:last-child {
  border-bottom: none;
}

/* Add color accent on hover */
.dropdown-content a::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 4px;
  background: currentColor;
  opacity: 0;
  transition: opacity 0.3s ease;
  border-radius: 2px;
}

.dropdown-content a:hover::before {
  opacity: 0.7;
}

.dropdown-content a:hover {
  background: rgba(255, 255, 255, 0.08) !important;
  padding-left: 28px;
  transform: translateX(4px);
  color: white !important;
}

.dropdown-content a i {
  width: 20px;
  text-align: center;
  font-size: 1.1rem;
  transition: transform 0.3s ease;
}

.dropdown-content a:hover i {
  transform: scale(1.2);
}

/* Dropdown item colors */
.dropdown-content a.nav-community { 
  color: #00BCD4 !important; /* Teal */
}

.dropdown-content a.nav-security { 
  color: #4CAF50 !important; /* Green */
}

.dropdown-content a.nav-whitepaper { 
  color: #795548 !important; /* Brown */
}

.dropdown-content a.nav-governance { 
  color: #FF9800 !important; /* Orange */
}

.dropdown-content a.nav-roadmap { 
  color: #FF5722 !important; /* Deep Orange */
}

.dropdown-content a.nav-integrity { 
  color: #607D8B !important; /* Blue Grey */
}

.dropdown-content a.nav-artwork { 
  color: #E91E63 !important; /* Magenta */
}

.dropdown-divider {
  height: 1px;
  background: linear-gradient(90deg, 
    transparent, 
    rgba(255, 255, 255, 0.1), 
    transparent);
  margin: 8px 20px;
}

/* Show dropdown on hover for desktop */
@media (min-width: 769px) {
  .dropdown:hover .dropdown-content {
    display: block;
    animation: fadeIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .dropdown:hover .dropbtn {
    background: linear-gradient(135deg, 
      rgba(255, 215, 0, 0.2), 
      rgba(255, 215, 0, 0.1)) !important;
    box-shadow: 0 4px 15px rgba(255, 215, 0, 0.2);
    transform: translateY(-2px);
  }
  
  /* Hide dropdown arrow on desktop hover */
  .dropdown:hover .dropbtn .dropdown-arrow {
    display: none;
  }
}

@keyframes fadeIn {
  from { 
    opacity: 0; 
    transform: translateY(-10px) scale(0.95); 
  }
  to { 
    opacity: 1; 
    transform: translateY(0) scale(1); 
  }
}

/* ========== BUY BUTTON & DROPDOWN ========== */
/* On desktop - push buy button to the right */
.buy-dropdown {
  position: relative;
  display: inline-block;
  margin-left: auto;
}

/* Buy Toggle Button */
.buy-toggle {
  background: linear-gradient(135deg, 
    var(--rebel-red), 
    var(--rebel-gold), 
    var(--rebel-red));
  background-size: 200% auto;
  color: white !important;
  padding: 12px 24px;
  border-radius: 30px;
  font-weight: 700;
  font-size: 1rem;
  letter-spacing: 0.5px;
  border: none;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  gap: 10px;
  min-width: 160px;
  justify-content: center;
  text-transform: uppercase;
  animation: gradientShift 3s ease infinite;
  box-shadow: 0 4px 20px rgba(215, 77, 77, 0.3);
  position: relative;
  z-index: 100;
  text-decoration: none !important;
}

.buy-toggle:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 25px rgba(215, 77, 77, 0.4);
  animation: none;
}

.buy-toggle.active {
  background: linear-gradient(135deg, 
    var(--rebel-gold), 
    var(--rebel-red), 
    var(--rebel-gold));
  border-bottom-left-radius: 0;
  border-bottom-right-radius: 0;
  box-shadow: 0 4px 20px rgba(215, 77, 77, 0.3);
}

.buy-toggle .dropdown-arrow {
  font-size: 0.8rem;
  margin-left: 5px;
  transition: transform 0.3s ease;
}

.buy-toggle.active .dropdown-arrow {
  transform: rotate(180deg);
}

/* Buy Options Dropdown */
.buy-options {
  display: none;
  position: absolute;
  top: 100%;
  right: 0;
  background: rgba(15, 15, 15, 0.98);
  backdrop-filter: blur(20px);
  border: 1px solid rgba(212, 167, 106, 0.3);
  border-radius: 0 0 20px 20px;
  padding: 20px;
  width: 320px;
  box-shadow: 0 20px 50px rgba(0, 0, 0, 0.7);
  z-index: 99;
  animation: slideDown 0.3s ease;
  margin-top: -1px;
  border-top: none;
}

.buy-dropdown.active .buy-options {
  display: block;
}

@keyframes gradientShift {
  0% { background-position: 0% center; }
  50% { background-position: 100% center; }
  100% { background-position: 0% center; }
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Primary Option */
.buy-option.primary {
  background: linear-gradient(135deg, 
    rgba(255, 107, 53, 0.1), 
    rgba(255, 107, 53, 0.05));
  border: 1px solid rgba(255, 107, 53, 0.3);
  border-radius: 12px;
  padding: 15px;
  margin-bottom: 15px;
}

.buy-option.primary:hover {
  background: linear-gradient(135deg, 
    rgba(255, 107, 53, 0.2), 
    rgba(255, 107, 53, 0.1));
  border-color: #FF6B35;
  transform: translateY(-2px);
}

/* Regular Options */
.buy-option {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 15px;
  border-radius: 10px;
  text-decoration: none !important;
  transition: all 0.2s ease;
  margin-bottom: 8px;
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid transparent;
  color: white !important;
}

.buy-option:hover {
  background: rgba(255, 255, 255, 0.08);
  transform: translateX(5px);
  border-color: rgba(255, 255, 255, 0.1);
}

/* Option Icon */
.option-icon {
  width: 40px;
  height: 40px;
  border-radius: 10px;
  background: rgba(255, 255, 255, 0.05);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.2rem;
  flex-shrink: 0;
  color: inherit;
}

.buy-option.primary .option-icon {
  background: rgba(255, 107, 53, 0.1);
  color: #FF6B35;
}

/* Option Content */
.option-content {
  flex: 1;
  text-align: left;
}

.option-title {
  font-weight: 700;
  font-size: 1rem;
  color: white;
  margin-bottom: 4px;
}

.option-desc {
  font-size: 0.8rem;
  color: rgba(255, 255, 255, 0.6);
}

/* Badges */
.option-badge {
  font-size: 0.7rem;
  font-weight: 700;
  padding: 4px 10px;
  border-radius: 20px;
  background: linear-gradient(135deg, #FF6B35, #FF9800);
  color: white !important;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  white-space: nowrap;
}

.option-badge.recommended {
  background: linear-gradient(135deg, #4CAF50, #2E7D32);
}

/* Option Groups */
.option-group {
  margin: 20px 0;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  padding-top: 15px;
}

.group-title {
  font-size: 0.9rem;
  font-weight: 600;
  color: var(--rebel-gold);
  margin-bottom: 12px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* Contract Display */
.contract-display {
  margin-top: 20px;
  padding-top: 15px;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.contract-label {
  font-size: 0.8rem;
  color: rgba(255, 255, 255, 0.7);
  margin-bottom: 8px;
}

.contract-value {
  font-family: 'Courier New', monospace;
  font-size: 0.75rem;
  color: white;
  background: rgba(255, 255, 255, 0.05);
  padding: 10px;
  border-radius: 8px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  word-break: break-all;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.contract-value:hover {
  background: rgba(255, 255, 255, 0.08);
  border-color: var(--rebel-gold);
}

.copy-icon {
  color: var(--rebel-gold);
  font-size: 0.9rem;
  margin-left: 10px;
  flex-shrink: 0;
}

.copy-message {
  font-size: 0.75rem;
  color: #4CAF50;
  margin-top: 5px;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.copy-message.show {
  opacity: 1;
}

/* ========== MOBILE STYLES (768px and below) ========== */
@media (max-width: 768px) {
  /* Mobile Navigation */
  .mobile-nav-toggle {
    display: flex;
    background: transparent;
    border: 2px solid rgba(212, 167, 106, 0.3);
    border-radius: 10px;
    font-size: 1.5rem;
    color: var(--rebel-gold);
    cursor: pointer;
    width: 44px;
    height: 44px;
    z-index: 1002;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    flex-shrink: 0;
  }
  
  .mobile-nav-toggle:hover {
    background: rgba(212, 167, 106, 0.1);
    transform: scale(1.05);
  }
  
  #nav-desktop {
    display: none;
    flex-direction: column;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    background: rgba(5, 5, 5, 0.98);
    padding: 100px var(--spacing-md) var(--spacing-2xl);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    z-index: 1001;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    backdrop-filter: blur(20px);
    align-items: stretch;
    margin: 0;
  }
  
  #nav-desktop.active {
    display: flex;
  }
  
  #nav-desktop a {
    padding: var(--spacing-lg) var(--spacing-xl);
    border-radius: 16px;
    margin-bottom: 0.75rem;
    font-size: 1.15rem;
    justify-content: flex-start;
    min-height: 60px;
    width: 100%;
    border: 1px solid rgba(255, 255, 255, 0.1);
  }
  
  #nav-desktop a i {
    margin-right: 15px;
    min-width: 28px;
    text-align: center;
    font-size: 1.3rem;
  }
  
  /* Brand adjustments */
  .brand-title {
    font-size: 1.5rem;
  }
  
  .brand-subtitle {
    font-size: 0.75rem;
    padding: 3px 10px;
  }
  
  /* Mobile Dropdown */
  .dropdown {
    width: 100%;
    margin-bottom: 0.75rem;
  }
  
  .dropdown-content {
    display: none;
    position: relative !important;
    background: rgba(10, 10, 10, 0.95) !important;
    border: 1px solid rgba(255, 255, 255, 0.15) !important;
    border-radius: 16px !important;
    margin: 15px 0 20px 0 !important;
    padding: 10px 0 !important;
    width: 100% !important;
    right: auto !important;
    left: 0 !important;
    box-shadow: none !important;
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1) !important;
    animation: none !important;
  }
  
  /* Show when active */
  .dropdown.active .dropdown-content,
  .dropdown-content.active {
    display: block !important;
    max-height: 600px !important;
    opacity: 1 !important;
    visibility: visible !important;
  }
  
  .dropdown-content a {
    padding: 18px 24px !important;
    margin: 4px 12px !important;
    border-radius: 12px !important;
    background: rgba(255, 255, 255, 0.05) !important;
    display: flex !important;
    align-items: center !important;
    min-height: 60px !important;
    border-left: 4px solid transparent !important;
    font-size: 1.05rem !important;
    -webkit-tap-highlight-color: rgba(212, 167, 106, 0.2);
  }
  
  .dropdown-content a:hover,
  .dropdown-content a:active {
    background: rgba(255, 255, 255, 0.1) !important;
    padding-left: 28px !important;
    border-left-color: currentColor !important;
  }
  
  .dropbtn {
    width: 100% !important;
    justify-content: space-between !important;
    padding: 20px 24px !important;
    margin: 5px 0 !important;
    border-radius: 16px !important;
    font-size: 1.15rem !important;
    -webkit-tap-highlight-color: rgba(212, 167, 106, 0.3);
  }
  
  /* Mobile Dropdown Arrow */
  .dropbtn .dropdown-arrow {
    margin-left: auto;
    font-size: 0.9em;
    transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  }
  
  .dropdown.active .dropbtn .dropdown-arrow,
  .dropbtn.active .dropdown-arrow {
    transform: rotate(180deg) scale(1.1) !important;
  }
  
  /* Visual feedback for active dropdown button */
  .dropdown.active .dropbtn,
  .dropbtn.active {
    background: linear-gradient(135deg, 
      rgba(255, 215, 0, 0.25), 
      rgba(255, 152, 0, 0.15)) !important;
    border-color: var(--rebel-gold) !important;
    box-shadow: 0 4px 15px rgba(255, 215, 0, 0.2) !important;
  }
  
  /* Mobile Buy Dropdown */
  .buy-dropdown {
    width: 100%;
    margin-top: 20px;
    margin-left: 0;
    order: 100; /* Move to bottom in mobile menu */
  }
  
  .buy-toggle {
    width: 100%;
    max-width: 100%;
    margin: 0 auto;
    padding: 18px 24px;
    font-size: 1.1rem;
  }
  
  .buy-options {
    position: fixed;
    top: auto;
    bottom: 0;
    left: 0;
    right: 0;
    width: 100%;
    max-width: 100%;
    border-radius: 20px 20px 0 0;
    margin-top: 0;
    border-top: 1px solid rgba(212, 167, 106, 0.3);
    animation: slideUpMobile 0.3s ease;
    max-height: 70vh;
    overflow-y: auto;
    z-index: 1002;
  }
  
  @keyframes slideUpMobile {
    from {
      opacity: 0;
      transform: translateY(100%);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  .buy-dropdown.active .buy-toggle {
    border-radius: 30px 30px 0 0;
  }
  
  /* Header container adjustments */
  .header-container {
    flex-wrap: wrap;
    gap: 10px;
  }
  
  /* Ensure brand takes available space */
  .brand-link {
    flex: 1;
  }
}

/* ========== DESKTOP SPECIFIC (769px and above) ========== */
@media (min-width: 769px) {
  /* Hide mobile toggle on desktop */
  .mobile-nav-toggle {
    display: none;
  }
  
  /* Show desktop navigation */
  #nav-desktop {
    display: flex;
  }
  
  /* Position buy dropdown on right */
  .buy-dropdown {
    margin-left: auto;
  }
}

/* ========== TOUCH DEVICE OPTIMIZATIONS ========== */
@media (hover: none) and (pointer: coarse) {
  .dropbtn:active,
  .dropdown-content a:active {
    transform: scale(0.98);
    transition: transform 0.1s ease;
  }
  
  #nav-desktop a:active {
    transform: scale(0.98);
  }
  
  .buy-toggle:active {
    transform: scale(0.98);
  }
}

/* ========== ACCESSIBILITY IMPROVEMENTS ========== */
.dropbtn:focus-visible,
.dropdown-content a:focus-visible,
#nav-desktop a:focus-visible,
.buy-toggle:focus-visible {
  outline: 3px solid var(--rebel-gold);
  outline-offset: 2px;
}

/* ========== PERFORMANCE OPTIMIZATIONS ========== */
.dropdown-content,
.dropbtn,
#nav-desktop a,
.brand-link {
  will-change: transform, opacity;
  backface-visibility: hidden;
}

/* ========== DARK MODE CONSISTENCY ========== */
@media (prefers-color-scheme: dark) {
  .dropdown-content {
    background: rgba(8, 8, 8, 0.98);
    border-color: rgba(212, 167, 106, 0.25);
  }
  
  #nav-desktop.active {
    background: rgba(3, 3, 3, 0.98);
  }
}

/* ========== HIGH CONTRAST MODE SUPPORT ========== */
@media (prefers-contrast: high) {
  #nav-desktop a {
    border-width: 2px;
  }
  
  .dropbtn {
    border-width: 2px;
  }
  
  .dropdown-content a {
    border-bottom-width: 2px;
  }
}
2. Fixed common.js:
javascript
// js/common.js - Main functionality for all pages

// ========== HEADER SCROLL EFFECT ==========
function setupHeaderScrollEffect() {
  const header = document.querySelector('header');
  if (!header) return;
  
  let ticking = false;
  
  function updateHeader() {
    if (window.scrollY > 50) {
      header.classList.add('scrolled');
    } else {
      header.classList.remove('scrolled');
    }
    ticking = false;
  }
  
  window.addEventListener('scroll', function() {
    if (!ticking) {
      window.requestAnimationFrame(updateHeader);
      ticking = true;
    }
  });
  
  // Initial check
  updateHeader();
  console.log('üìú Header scroll effect initialized');
}

// ========== BUY DROPDOWN TOGGLE ==========
function setupBuyDropdown() {
  console.log('üõí Setting up Buy dropdown...');
  
  const buyToggles = document.querySelectorAll('.buy-toggle');
  const buyDropdowns = document.querySelectorAll('.buy-dropdown');
  
  if (buyToggles.length === 0 || buyDropdowns.length === 0) {
    console.warn('‚ö†Ô∏è No buy dropdown elements found');
    return;
  }
  
  buyToggles.forEach((toggle, index) => {
    // Remove existing event listeners
    const newToggle = toggle.cloneNode(true);
    toggle.parentNode.replaceChild(newToggle, toggle);
    
    newToggle.addEventListener('click', function(e) {
      e.preventDefault();
      e.stopPropagation();
      
      const dropdown = this.closest('.buy-dropdown');
      if (!dropdown) return;
      
      const isActive = dropdown.classList.contains('active');
      
      // Close all other buy dropdowns
      buyDropdowns.forEach(d => d.classList.remove('active'));
      
      // Close all other dropdowns
      document.querySelectorAll('.dropdown').forEach(d => {
        d.classList.remove('active');
      });
      
      // Toggle this dropdown
      if (!isActive) {
        dropdown.classList.add('active');
        console.log(`üõí Buy dropdown ${index + 1} opened`);
      }
    });
  });
  
  // Close dropdown when clicking outside
  document.addEventListener('click', function(e) {
    if (!e.target.closest('.buy-dropdown') && !e.target.closest('.dropdown')) {
      buyDropdowns.forEach(d => d.classList.remove('active'));
    }
  });
  
  // Close buy dropdown when clicking a buy option
  document.querySelectorAll('.buy-option').forEach(option => {
    option.addEventListener('click', function() {
      setTimeout(() => {
        buyDropdowns.forEach(d => d.classList.remove('active'));
      }, 300);
    });
  });
  
  // Copy contract address function
  window.copyContract = function() {
    const contract = 'F4gh7VNjtp69gKv3JVhFFtXTD4NBbHfbEq5zdiBJpump';
    const copyMessage = document.getElementById('copyMessage');
    const copyMessageMobile = document.getElementById('copyMessageMobile');
    
    // Try modern clipboard API first
    if (navigator.clipboard && navigator.clipboard.writeText) {
      navigator.clipboard.writeText(contract)
        .then(() => {
          showCopySuccess(copyMessage);
          showCopySuccess(copyMessageMobile);
        })
        .catch(err => {
          console.error('Failed to copy contract:', err);
          fallbackCopy(contract);
        });
    } else {
      // Fallback for older browsers
      fallbackCopy(contract);
    }
  };
  
  function fallbackCopy(text) {
    const textArea = document.createElement('textarea');
    textArea.value = text;
    textArea.style.position = 'fixed';
    textArea.style.opacity = '0';
    document.body.appendChild(textArea);
    textArea.select();
    
    try {
      document.execCommand('copy');
      const copyMessage = document.getElementById('copyMessage');
      const copyMessageMobile = document.getElementById('copyMessageMobile');
      showCopySuccess(copyMessage);
      showCopySuccess(copyMessageMobile);
    } catch (err) {
      console.error('Fallback copy failed:', err);
      alert('Failed to copy contract address. Please copy manually: ' + text);
    }
    
    document.body.removeChild(textArea);
  }
  
  function showCopySuccess(element) {
    if (element) {
      element.classList.add('show');
      setTimeout(() => {
        element.classList.remove('show');
      }, 2000);
    }
  }
  
  console.log('‚úÖ Buy dropdown setup complete');
}

// ========== MOBILE NAVIGATION ==========
function setupMobileNavigation() {
  console.log('üì± Setting up mobile navigation...');
  
  const mobileToggle = document.getElementById('mobileNavToggle');
  const navDesktop = document.getElementById('nav-desktop');
  
  if (!mobileToggle || !navDesktop) {
    console.warn('‚ö†Ô∏è Mobile navigation elements not found');
    return;
  }
  
  // Remove any existing event listeners
  const newToggle = mobileToggle.cloneNode(true);
  mobileToggle.parentNode.replaceChild(newToggle, mobileToggle);
  
  newToggle.addEventListener('click', function(e) {
    e.preventDefault();
    e.stopPropagation();
    
    const isOpening = !navDesktop.classList.contains('active');
    navDesktop.classList.toggle('active');
    
    // Update icon
    this.innerHTML = navDesktop.classList.contains('active') ? 
      '<i class="fas fa-times"></i>' : 
      '<i class="fas fa-bars"></i>';
    
    // Toggle body scroll and aria attributes
    if (navDesktop.classList.contains('active')) {
      document.body.style.overflow = 'hidden';
      this.setAttribute('aria-expanded', 'true');
      navDesktop.setAttribute('aria-hidden', 'false');
    } else {
      document.body.style.overflow = '';
      this.setAttribute('aria-expanded', 'false');
      navDesktop.setAttribute('aria-hidden', 'true');
    }
    
    // Close dropdowns when opening nav
    if (isOpening) {
      closeAllDropdowns();
    }
    
    console.log('üì± Mobile nav toggled:', navDesktop.classList.contains('active') ? 'open' : 'closed');
  });
  
  // Close nav when clicking outside (mobile only)
  document.addEventListener('click', function(e) {
    if (window.innerWidth > 768) return;
    
    if (navDesktop.classList.contains('active') && 
        !e.target.closest('#nav-desktop') && 
        !e.target.closest('#mobileNavToggle')) {
      closeMobileNav();
    }
  });
  
  // Close nav when pressing escape
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
      closeMobileNav();
    }
  });
  
  console.log('‚úÖ Mobile navigation setup complete');
}

function closeMobileNav() {
  const mobileToggle = document.getElementById('mobileNavToggle');
  const navDesktop = document.getElementById('nav-desktop');
  
  if (navDesktop) {
    navDesktop.classList.remove('active');
    navDesktop.setAttribute('aria-hidden', 'true');
  }
  if (mobileToggle) {
    mobileToggle.innerHTML = '<i class="fas fa-bars"></i>';
    mobileToggle.setAttribute('aria-expanded', 'false');
  }
  document.body.style.overflow = '';
  closeAllDropdowns();
  
  console.log('üì± Mobile nav closed');
}

// ========== DROPDOWNS ==========
function setupDropdowns() {
  console.log('üîΩ Setting up dropdowns...');
  
  const dropbtns = document.querySelectorAll('.dropbtn');
  const dropdowns = document.querySelectorAll('.dropdown');
  
  console.log(`Found ${dropbtns.length} dropdown buttons and ${dropdowns.length} dropdowns`);
  
  if (dropbtns.length === 0 || dropdowns.length === 0) {
    console.warn('‚ö†Ô∏è Dropdown elements not found');
    return;
  }
  
  // Add click event to each dropdown button
  dropbtns.forEach((dropbtn, index) => {
    // Skip if already has our event listener
    if (dropbtn.dataset.dropdownInitialized === 'true') {
      return;
    }
    
    dropbtn.dataset.dropdownInitialized = 'true';
    
    dropbtn.addEventListener('click', function(e) {
      console.log(`üéØ Dropdown ${index + 1} clicked`);
      
      e.preventDefault();
      e.stopPropagation();
      
      const dropdown = this.closest('.dropdown');
      if (!dropdown) return;
      
      const dropdownContent = dropdown.querySelector('.dropdown-content');
      if (!dropdownContent) return;
      
      const isMobile = window.innerWidth <= 768;
      const isOpen = dropdown.classList.contains('active');
      
      // Close all other dropdowns first
      closeAllDropdowns();
      
      // Close buy dropdowns
      document.querySelectorAll('.buy-dropdown').forEach(d => {
        d.classList.remove('active');
      });
      
      // Toggle this dropdown
      if (!isOpen) {
        dropdown.classList.add('active');
        this.classList.add('active');
        
        if (isMobile) {
          // For mobile, use max-height animation
          dropdownContent.style.display = 'block';
          setTimeout(() => {
            dropdownContent.style.maxHeight = '600px';
          }, 10);
        } else {
          // For desktop, use display
          dropdownContent.style.display = 'block';
        }
        console.log('üü¢ Dropdown opened');
      } else {
        console.log('üî¥ Dropdown closed');
      }
    });
  });
  
  // Close dropdowns when clicking outside
  document.addEventListener('click', function(e) {
    if (!e.target.closest('.dropdown') && !e.target.closest('.buy-dropdown')) {
      closeAllDropdowns();
    }
  });
  
  // Close dropdown when clicking a link inside
  document.querySelectorAll('.dropdown-content a').forEach(link => {
    link.addEventListener('click', function() {
      setTimeout(() => {
        closeAllDropdowns();
        if (window.innerWidth <= 768) {
          closeMobileNav();
        }
      }, 300);
    });
  });
  
  // Handle window resize
  let resizeTimer;
  window.addEventListener('resize', function() {
    clearTimeout(resizeTimer);
    resizeTimer = setTimeout(() => {
      // Close dropdowns when switching to desktop
      if (window.innerWidth > 768) {
        closeAllDropdowns();
        document.querySelectorAll('.dropdown-content').forEach(content => {
          content.style.display = 'none';
          content.style.maxHeight = '';
        });
      } else {
        // Reset mobile dropdown styles
        document.querySelectorAll('.dropdown-content').forEach(content => {
          content.style.display = 'none';
          content.style.maxHeight = '0';
        });
      }
    }, 250);
  });
  
  console.log('‚úÖ Dropdowns setup complete');
}

function closeAllDropdowns() {
  // Hide all dropdown contents
  document.querySelectorAll('.dropdown-content').forEach(content => {
    content.style.display = 'none';
    content.style.maxHeight = '0';
    content.classList.remove('active');
  });
  
  // Remove active class from dropdown containers
  document.querySelectorAll('.dropdown').forEach(dropdown => {
    dropdown.classList.remove('active');
  });
  
  // Remove active class from buttons
  document.querySelectorAll('.dropbtn').forEach(btn => {
    btn.classList.remove('active');
  });
  
  // Close buy dropdowns
  document.querySelectorAll('.buy-dropdown').forEach(d => {
    d.classList.remove('active');
  });
}

// ========== BACK TO TOP ==========
function setupBackToTop() {
  const backToTop = document.getElementById('backToTop');
  if (!backToTop) return;
  
  let ticking = false;
  
  function updateBackToTop() {
    if (window.pageYOffset > 300) {
      backToTop.classList.add('visible');
    } else {
      backToTop.classList.remove('visible');
    }
    ticking = false;
  }
  
  window.addEventListener('scroll', function() {
    if (!ticking) {
      window.requestAnimationFrame(updateBackToTop);
      ticking = true;
    }
  });
  
  backToTop.addEventListener('click', function() {
    window.scrollTo({
      top: 0,
      behavior: 'smooth'
    });
    
    // Focus management for accessibility
    setTimeout(() => {
      const firstFocusable = document.querySelector('header a, header button');
      if (firstFocusable) firstFocusable.focus();
    }, 500);
  });
  
  console.log('‚¨ÜÔ∏è Back to top button setup complete');
}

// ========== ACTIVE NAVIGATION ==========
function setActiveNavItem() {
  console.log('üìç Setting active navigation item...');
  
  const currentPath = window.location.pathname;
  const currentPage = currentPath.split('/').pop() || 'index.html';
  console.log('Current page:', currentPage);
  
  // Remove active from all nav items
  document.querySelectorAll('#nav-desktop a, .dropbtn').forEach(el => {
    el.classList.remove('active');
  });
  
  // Define active page mapping
  const pageMap = {
    'index.html': 'a[href="index.html"]',
    'trade.html': 'a.nav-trade',
    'epoch-rewards.html': 'a.nav-rewards',
    'rebl-calculator.html': 'a.nav-rewards',
    'tokenomics.html': 'a.nav-tokenomics',
    'security.html': 'a.nav-security',
    'community.html': 'a.nav-community',
    'governance.html': 'a.nav-governance',
    'roadmap.html': 'a.nav-roadmap',
    'integrity.html': 'a.nav-integrity',
    'artwork.html': 'a.nav-artwork',
    'whitepaper.html': 'a.nav-whitepaper'
  };
  
  const selector = pageMap[currentPage];
  if (selector) {
    const activeElement = document.querySelector(selector);
    if (activeElement) {
      activeElement.classList.add('active');
      
      // If it's in a dropdown, also mark the dropdown button as active
      const dropdown = activeElement.closest('.dropdown-content');
      if (dropdown) {
        const dropdownBtn = dropdown.previousElementSibling;
        if (dropdownBtn && dropdownBtn.classList.contains('dropbtn')) {
          dropdownBtn.classList.add('active');
        }
      }
      
      console.log(`‚úÖ Active element set: ${selector}`);
    } else {
      console.warn(`‚ö†Ô∏è Could not find active element: ${selector}`);
    }
  } else {
    console.log(`‚ÑπÔ∏è No active mapping for: ${currentPage}`);
  }
}

// ========== PERFORMANCE OPTIMIZATIONS ==========
function setupPerformance() {
  // Debounce resize events
  let resizeTimeout;
  window.addEventListener('resize', function() {
    clearTimeout(resizeTimeout);
    resizeTimeout = setTimeout(function() {
      window.dispatchEvent(new Event('resizeDone'));
    }, 250);
  });
  
  // Lazy load images
  if ('IntersectionObserver' in window) {
    const imageObserver = new IntersectionObserver((entries, observer) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const img = entry.target;
          img.src = img.dataset.src;
          img.classList.add('loaded');
          observer.unobserve(img);
        }
      });
    });
    
    document.querySelectorAll('img[data-src]').forEach(img => {
      imageObserver.observe(img);
    });
  }
}

// ========== INITIALIZE EVERYTHING ==========
function initializeCommon() {
  console.log('üöÄ Initializing common functionality...');
  
  try {
    // 1. Hide loader
    hideLoader();
    
    // 2. Setup performance optimizations
    setupPerformance();
    
    // 3. Setup header scroll effect
    setupHeaderScrollEffect();
    
    // 4. Setup mobile navigation
    setupMobileNavigation();
    
    // 5. Setup dropdowns
    setupDropdowns();
    
    // 6. Setup buy dropdown
    setupBuyDropdown();
    
    // 7. Setup back to top
    setupBackToTop();
    
    // 8. Set active navigation item
    setActiveNavItem();
    
    // 9. Add body class for JavaScript detection
    document.body.classList.add('js-enabled');
    
    console.log('‚úÖ Common functionality initialized successfully');
  } catch (error) {
    console.error('‚ùå Error initializing common functionality:', error);
  }
}

// ========== LOADER ==========
function hideLoader() {
  const loader = document.getElementById('loader');
  if (loader) {
    // Add fade out animation
    loader.style.transition = 'opacity 0.5s ease, visibility 0.5s ease';
    loader.style.opacity = '0';
    loader.style.visibility = 'hidden';
    
    setTimeout(() => {
      if (loader.parentNode) {
        loader.parentNode.removeChild(loader);
      }
    }, 500);
    
    console.log('üëã Loader hidden');
  }
}

// ========== DEBUG FUNCTIONS ==========
function debugDropdowns() {
  console.log('=== DROPDOWN DEBUG ===');
  console.log('Window width:', window.innerWidth);
  console.log('Is mobile?', window.innerWidth <= 768);
  console.log('Dropdown buttons:', document.querySelectorAll('.dropbtn').length);
  console.log('Dropdown contents:', document.querySelectorAll('.dropdown-content').length);
  console.log('Buy dropdowns:', document.querySelectorAll('.buy-dropdown').length);
  
  document.querySelectorAll('.dropbtn').forEach((btn, i) => {
    console.log(`Button ${i}:`, {
      text: btn.textContent.trim(),
      hasListener: btn.dataset.dropdownInitialized === 'true',
      isActive: btn.classList.contains('active'),
      parentActive: btn.closest('.dropdown')?.classList.contains('active')
    });
  });
}

// ========== INITIALIZE ON DOM READY ==========
document.addEventListener('DOMContentLoaded', function() {
  console.log('üìÑ DOM Content Loaded (common.js)');
  
  // Start initialization with a small delay
  setTimeout(initializeCommon, 100);
  
  // Add debug command to window for development
  if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
    window.debugDropdowns = debugDropdowns;
    window.debugComponents = function() {
      console.log('=== COMPONENTS DEBUG ===');
      console.log('Components loaded:', window.componentsLoaded);
      console.log('Components loading:', window.componentsLoading);
    };
  }
});

// ========== EXPORT FUNCTIONS FOR OTHER FILES ==========
window.setupMobileNavigation = setupMobileNavigation;
window.setupDropdowns = setupDropdowns;
window.setupBackToTop = setupBackToTop;
window.setActiveNavItem = setActiveNavItem;
window.closeAllDropdowns = closeAllDropdowns;
window.closeMobileNav = closeMobileNav;
window.initializeCommon = initializeCommon;
3. Fixed includes.js:
javascript
// js/includes.js - Load header and footer components with enhanced error handling

// Global state to track component loading
window.componentsLoaded = false;
window.componentsLoading = false;
window.componentsError = false;

// Configuration
const COMPONENTS_CONFIG = {
  retryAttempts: 3,
  retryDelay: 1000,
  timeout: 5000
};

// Load all components
async function loadAllComponents() {
  if (window.componentsLoading || window.componentsLoaded) return;
  
  window.componentsLoading = true;
  window.componentsError = false;
  
  console.log('üîÑ Loading components...');
  
  try {
    const components = [];
    
    // Load header
    if (document.getElementById('header-container')) {
      components.push(loadComponent('header-container', 'header.html'));
    }
    
    // Load footer
    if (document.getElementById('footer-container')) {
      components.push(loadComponent('footer-container', 'footer.html'));
    }
    
    // Wait for all components to load
    await Promise.all(components);
    
    window.componentsLoaded = true;
    window.componentsLoading = false;
    
    console.log('‚úÖ All components loaded successfully');
    
    // Initialize components after loading
    initializeComponents();
    
  } catch (error) {
    console.error('‚ùå Error loading components:', error);
    window.componentsLoading = false;
    window.componentsError = true;
    
    // Show user-friendly error messages
    showComponentErrors();
  }
}

// Load individual component with retry logic
async function loadComponent(elementId, url, attempt = 1) {
  try {
    console.log(`üì• Loading ${url} (attempt ${attempt}/${COMPONENTS_CONFIG.retryAttempts})...`);
    
    // Create abort controller for timeout
    const controller = new AbortController();
    const timeoutId = setTimeout(() => controller.abort(), COMPONENTS_CONFIG.timeout);
    
    const response = await fetch(url, {
      signal: controller.signal,
      headers: {
        'Accept': 'text/html',
        'Cache-Control': 'no-cache'
      }
    });
    
    clearTimeout(timeoutId);
    
    if (!response.ok) {
      throw new Error(`HTTP ${response.status} loading ${url}`);
    }
    
    const html = await response.text();
    const container = document.getElementById(elementId);
    
    if (!container) {
      throw new Error(`Container #${elementId} not found`);
    }
    
    // Insert the HTML
    container.innerHTML = html;
    
    // Mark as loaded
    container.dataset.loaded = 'true';
    container.dataset.component = url.replace('.html', '');
    
    console.log(`‚úÖ ${url} loaded into #${elementId}`);
    
    // Dispatch custom event
    container.dispatchEvent(new CustomEvent('component:loaded', {
      detail: { elementId, url }
    }));
    
    return true;
    
  } catch (error) {
    console.error(`‚ùå Failed to load ${url}:`, error);
    
    // Retry logic
    if (attempt < COMPONENTS_CONFIG.retryAttempts) {
      console.log(`üîÑ Retrying ${url} in ${COMPONENTS_CONFIG.retryDelay}ms...`);
      await new Promise(resolve => setTimeout(resolve, COMPONENTS_CONFIG.retryDelay));
      return loadComponent(elementId, url, attempt + 1);
    }
    
    // Show error message
    const container = document.getElementById(elementId);
    if (container) {
      container.innerHTML = `
        <div class="component-error" style="
          padding: 20px;
          text-align: center;
          color: var(--rebel-red);
          background: rgba(215, 77, 77, 0.1);
          border-radius: 8px;
          margin: 10px;
          border: 1px solid rgba(215, 77, 77, 0.3);
        ">
          <i class="fas fa-exclamation-triangle" style="margin-right: 8px;"></i>
          <strong>Failed to load ${url}</strong>
          <br>
          <small style="color: rgba(255, 255, 255, 0.7);">
            Please check your internet connection and try refreshing the page.
          </small>
          <br>
          <button onclick="window.location.reload()" style="
            margin-top: 10px;
            padding: 8px 16px;
            background: var(--rebel-red);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
          ">
            <i class="fas fa-sync-alt" style="margin-right: 5px;"></i>
            Retry Loading
          </button>
        </div>
      `;
    }
    
    throw error;
  }
}

// Initialize components after everything is loaded
function initializeComponents() {
  console.log('‚öôÔ∏è Initializing components...');
  
  try {
    // Check if common.js functions are available
    const requiredFunctions = [
      'setupMobileNavigation',
      'setupDropdowns',
      'setActiveNavItem',
      'setupBackToTop',
      'setupBuyDropdown',
      'setupHeaderScrollEffect'
    ];
    
    const missingFunctions = requiredFunctions.filter(fn => typeof window[fn] !== 'function');
    
    if (missingFunctions.length > 0) {
      console.warn('‚ö†Ô∏è Missing required functions:', missingFunctions);
      
      // Try to load common.js dynamically if missing
      if (!window.commonJsLoaded) {
        console.log('üîÑ Attempting to load common.js dynamically...');
        loadScript('js/common.js');
        return;
      }
    }
    
    // Initialize in correct order
    if (typeof setupMobileNavigation === 'function') {
      console.log('üîß Setting up mobile navigation...');
      setupMobileNavigation();
    }
    
    if (typeof setupDropdowns === 'function') {
      console.log('üîß Setting up dropdowns...');
      setupDropdowns();
    }
    
    if (typeof setupBuyDropdown === 'function') {
      console.log('üîß Setting up buy dropdown...');
      setupBuyDropdown();
    }
    
    if (typeof setActiveNavItem === 'function') {
      console.log('üîß Setting active nav item...');
      setActiveNavItem();
    }
    
    if (typeof setupHeaderScrollEffect === 'function') {
      console.log('üîß Setting up header scroll effect...');
      setupHeaderScrollEffect();
    }
    
    if (typeof setupBackToTop === 'function') {
      console.log('üîß Setting up back to top...');
      setupBackToTop();
    }
    
    // Dispatch initialization complete event
    document.dispatchEvent(new CustomEvent('components:initialized'));
    
    console.log('‚úÖ Components initialized successfully');
    
  } catch (error) {
    console.error('‚ùå Error initializing components:', error);
  }
}

// Load external script dynamically
function loadScript(src) {
  return new Promise((resolve, reject) => {
    const script = document.createElement('script');
    script.src = src;
    script.async = true;
    
    script.onload = () => {
      console.log(`‚úÖ ${src} loaded`);
      window.commonJsLoaded = true;
      resolve();
    };
    
    script.onerror = () => {
      console.error(`‚ùå Failed to load ${src}`);
      reject(new Error(`Failed to load script: ${src}`));
    };
    
    document.head.appendChild(script);
  });
}

// Show component errors to user
function showComponentErrors() {
  const errorContainer = document.createElement('div');
  errorContainer.id = 'components-error-alert';
  errorContainer.style.cssText = `
    position: fixed;
    top: 20px;
    right: 20px;
    background: var(--rebel-red);
    color: white;
    padding: 15px 20px;
    border-radius: 10px;
    box-shadow: 0 5px 20px rgba(0,0,0,0.3);
    z-index: 9999;
    max-width: 400px;
    animation: slideIn 0.3s ease;
  `;
  
  errorContainer.innerHTML = `
    <div style="display: flex; align-items: flex-start; gap: 10px;">
      <i class="fas fa-exclamation-circle" style="font-size: 1.2rem; margin-top: 2px;"></i>
      <div>
        <strong>Connection Issue</strong>
        <p style="margin: 5px 0; font-size: 0.9rem; opacity: 0.9;">
          Some components failed to load. The site may not function properly.
        </p>
        <button onclick="this.closest('#components-error-alert').remove()" 
                style="background: rgba(255,255,255,0.2); border: none; color: white; 
                       padding: 5px 10px; border-radius: 4px; cursor: pointer; 
                       font-size: 0.8rem; margin-top: 5px;">
          Dismiss
        </button>
      </div>
    </div>
  `;
  
  document.body.appendChild(errorContainer);
  
  // Auto-remove after 10 seconds
  setTimeout(() => {
    if (errorContainer.parentNode) {
      errorContainer.style.animation = 'slideOut 0.3s ease';
      setTimeout(() => errorContainer.remove(), 300);
    }
  }, 10000);
}

// Add CSS for animations
const style = document.createElement('style');
style.textContent = `
  @keyframes slideIn {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
  }
  
  @keyframes slideOut {
    from { transform: translateX(0); opacity: 1; }
    to { transform: translateX(100%); opacity: 0; }
  }
  
  .component-error {
    animation: fadeIn 0.3s ease;
  }
  
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(-10px); }
    to { opacity: 1; transform: translateY(0); }
  }
`;
document.head.appendChild(style);

// Handle page load
document.addEventListener('DOMContentLoaded', function() {
  console.log('üìÑ DOM Content Loaded (includes.js)');
  
  // Start loading components
  setTimeout(() => {
    loadAllComponents();
  }, 100);
});

// Handle window load (when all resources are loaded)
window.addEventListener('load', function() {
  console.log('üåê Window fully loaded');
  
  // If components haven't loaded yet, try to initialize
  if (window.componentsLoaded && typeof initializeComponents === 'function') {
    setTimeout(initializeComponents, 100);
  } else if (window.componentsError) {
    // If there was an error, try one more time
    console.log('üîÑ Retrying component loading...');
    setTimeout(loadAllComponents, 2000);
  }
});

// Handle network status changes
window.addEventListener('online', function() {
  console.log('üì∂ Network connection restored');
  
  if (!window.componentsLoaded && !window.componentsLoading) {
    console.log('üîÑ Retrying component loading...');
    loadAllComponents();
  }
});

// Export for debugging and external use
window.loadAllComponents = loadAllComponents;
window.loadComponent = loadComponent;
window.initializeComponents = initializeComponents;
window.showComponentErrors = showComponentErrors;

// Global component state access
Object.defineProperty(window, 'componentState', {
  get: function() {
    return {
      loaded: window.componentsLoaded,
      loading: window.componentsLoading,
      error: window.componentsError
    };
  }
});
4. Fixed header.html structure:
html
<header>
  <div class="header-container">
    <!-- Brand Logo -->
    <a href="index.html" class="brand-link" aria-label="RebelInuX Home">
      <div class="brand-content">
        <img src="images/logo256.png" 
             alt="RebelInuX Logo" 
             width="50" 
             height="50"
             loading="eager"
             class="brand-logo">
        <div class="brand-text">
          <div class="brand-title">RebelInuX</div>
          <div class="brand-subtitle">$REBL Epoch Rewards</div>
        </div>
      </div>
    </a>
    
    <!-- Mobile Menu Toggle -->
    <button class="mobile-nav-toggle" 
            id="mobileNavToggle" 
            aria-label="Toggle navigation"
            aria-expanded="false"
            aria-controls="nav-desktop">
      <i class="fas fa-bars"></i>
    </button>
    
    <!-- Navigation -->
    <nav id="nav-desktop" aria-label="Main navigation" aria-hidden="true">
      <!-- Trade -->
      <a href="trade.html" class="nav-trade">
        <i class="fas fa-chart-line"></i> Trade
      </a>
      
      <!-- Rewards -->
      <a href="epoch-rewards.html" class="nav-rewards">
        <i class="fas fa-gift"></i> Rewards
      </a>
      
      <!-- Tokenomics -->
      <a href="tokenomics.html" class="nav-tokenomics">
        <i class="fas fa-coins"></i> Tokenomics
      </a>
      
      <!-- More Dropdown -->
      <div class="dropdown">
        <button class="dropbtn nav-more" aria-expanded="false">
          <i class="fas fa-ellipsis-h"></i> More
          <span class="dropdown-arrow" aria-hidden="true">‚ñº</span>
        </button>
        <div class="dropdown-content" aria-label="More options">
          <a href="community.html" class="nav-community">
            <i class="fas fa-users"></i> Community
          </a>
          <a href="security.html" class="nav-security">
            <i class="fas fa-shield-alt"></i> Security
          </a>
          <a href="whitepaper.html" class="nav-whitepaper">
            <i class="fas fa-file-contract"></i> Whitepaper
          </a>
          <a href="governance.html" class="nav-governance">
            <i class="fas fa-vote-yea"></i> Governance
          </a>
          <a href="roadmap.html" class="nav-roadmap">
            <i class="fas fa-map-signs"></i> Roadmap
          </a>
          <a href="integrity.html" class="nav-integrity">
            <i class="fas fa-handshake"></i> Integrity
          </a>
          <a href="artwork.html" class="nav-artwork">
            <i class="fas fa-palette"></i> Artwork
          </a>
        </div>
      </div>
      
      <!-- Buy Dropdown -->
      <div class="buy-dropdown">
        <button class="cta-button buy-toggle" aria-expanded="false">
          <i class="fas fa-shopping-cart"></i> BUY $REBL
          <i class="fas fa-chevron-down dropdown-arrow" aria-hidden="true"></i>
        </button>
        
        <div class="buy-options" aria-label="Buy options">
          <!-- Primary Option - Most Used -->
          <a href="https://pump.fun/coin/F4gh7VNjtp69gKv3JVhFFtXTD4NBbHfbEq5zdiBJpump" 
             class="buy-option primary" 
             target="_blank" 
             rel="noopener noreferrer">
            <div class="option-icon">
              <i class="fas fa-bolt"></i>
            </div>
            <div class="option-content">
              <div class="option-title">Buy on Pump.fun</div>
              <div class="option-desc">Bonding Curve ‚Ä¢ Instant</div>
            </div>
            <div class="option-badge recommended">RECOMMENDED</div>
          </a>
          
          <!-- DEX Options -->
          <div class="option-group">
            <div class="group-title">DEX Trading</div>
            
            <a href="https://raydium.io/swap/?inputCurrency=sol&outputCurrency=F4gh7VNjtp69gKv3JVhFFtXTD4NBbHfbEq5zdiBJpump" 
               class="buy-option" 
               target="_blank" 
               rel="noopener noreferrer">
              <div class="option-icon">
                <i class="fas fa-water"></i>
              </div>
              <div class="option-content">
                <div class="option-title">Raydium</div>
                <div class="option-desc">AMM ‚Ä¢ High Liquidity</div>
              </div>
            </a>
            
            <a href="https://jup.ag/swap/SOL-F4gh7VNjtp69gKv3JVhFFtXTD4NBbHfbEq5zdiBJpump" 
               class="buy-option" 
               target="_blank" 
               rel="noopener noreferrer">
              <div class="option-icon">
                <i class="fas fa-exchange-alt"></i>
              </div>
              <div class="option-content">
                <div class="option-title">Jupiter</div>
                <div class="option-desc">Aggregator ‚Ä¢ Best Price</div>
              </div>
            </a>
          </div>
          
          <!-- Analytics/Charts -->
          <div class="option-group">
            <div class="group-title">Charts & Analytics</div>
            
            <a href="https://birdeye.so/token/F4gh7VNjtp69gKv3JVhFFtXTD4NBbHfbEq5zdiBJpump?chain=solana" 
               class="buy-option" 
               target="_blank" 
               rel="noopener noreferrer">
              <div class="option-icon">
                <i class="fas fa-chart-line"></i>
              </div>
              <div class="option-content">
                <div class="option-title">Birdeye</div>
                <div class="option-desc">Live Charts + Trade</div>
              </div>
            </a>
            
            <a href="https://dexscreener.com/solana/F4gh7VNjtp69gKv3JVhFFtXTD4NBbHfbEq5zdiBJpump" 
               class="buy-option" 
               target="_blank" 
               rel="noopener noreferrer">
              <div class="option-icon">
                <i class="fas fa-chart-bar"></i>
              </div>
              <div class="option-content">
                <div class="option-title">DexScreener</div>
                <div class="option-desc">Advanced Analytics</div>
              </div>
            </a>
          </div>
          
          <!-- Contract Info -->
          <div class="contract-display">
            <div class="contract-label">Contract Address:</div>
            <div class="contract-value" onclick="copyContract()" role="button" tabindex="0">
              F4gh7VNjtp69gKv3JVhFFtXTD4NBbHfbEq5zdiBJpump
              <i class="fas fa-copy copy-icon" aria-hidden="true"></i>
            </div>
            <div class="copy-message" id="copyMessage" aria-live="polite">Copied!</div>
          </div>
        </div>
      </div>
    </nav>
  </div>
</header>  display: flex;
  align-items: center;
  gap: 12px;
  position: relative;
}

.brand-logo {
  height: 48px;
  width: 48px;
  border-radius: 12px;
  object-fit: contain;
  display: block;
  border: 2px solid rgba(212, 167, 106, 0.3);
  padding: 4px;
  background: rgba(0, 0, 0, 0.6);
  transition: all 0.3s ease;
  flex-shrink: 0;
}

/* Add pulse animation to logo */
@keyframes logoPulse {
  0% { 
    box-shadow: 0 0 0 0 rgba(212, 167, 106, 0.6); 
    transform: scale(1);
  }
  70% { 
    box-shadow: 0 0 0 10px rgba(212, 167, 106, 0); 
    transform: scale(1.05);
  }
  100% { 
    box-shadow: 0 0 0 0 rgba(212, 167, 106, 0); 
    transform: scale(1);
  }
}

.brand-logo:hover {
  animation: logoPulse 2s infinite;
  border-color: var(--rebel-gold);
}

.brand-text {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  justify-content: center;
}

.brand-title {
  font-size: 1.8rem;
  font-weight: 900;
  background: linear-gradient(90deg, 
    var(--rebel-red) 0%, 
    var(--rebel-gold) 50%, 
    var(--rebel-red) 100%);
  background-size: 200% auto;
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
  animation: shimmer 4s ease-in-out infinite;
  line-height: 1.1;
  white-space: nowrap;
}

@keyframes shimmer {
  0% { background-position: 0% center; }
  50% { background-position: 100% center; }
  100% { background-position: 0% center; }
}

.brand-subtitle {
  font-size: 0.8rem;
  color: var(--rebel-gold);
  font-weight: 600;
  letter-spacing: 1.2px;
  text-transform: uppercase;
  background: rgba(212, 167, 106, 0.15);
  padding: 3px 10px;
  border-radius: 20px;
  border: 1px solid rgba(212, 167, 106, 0.25);
  margin-top: 2px;
  white-space: nowrap;
}

/* ========== DESKTOP NAVIGATION ========== */
#nav-desktop {
  display: flex;
  gap: var(--spacing-sm);
  align-items: center;
  flex: 1;
  justify-content: center;
  margin: 0 var(--spacing-md);
}

/* Base nav link styles */
#nav-desktop a {
  padding: 10px 20px;
  border-radius: 30px;
  font-weight: 600;
  position: relative;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  min-height: 44px;
  min-width: 44px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  text-decoration: none;
  font-size: 0.95rem;
  letter-spacing: 0.3px;
  overflow: hidden;
  border: 1px solid transparent;
  background: rgba(255, 255, 255, 0.05);
}

/* Add subtle gradient border effect */
#nav-desktop a::before {
  content: '';
  position: absolute;
  top: -1px;
  left: -1px;
  right: -1px;
  bottom: -1px;
  background: linear-gradient(90deg, 
    var(--rebel-red), 
    var(--rebel-gold), 
    var(--rebel-red));
  border-radius: 30px;
  z-index: -1;
  opacity: 0;
  transition: opacity 0.3s ease;
}

#nav-desktop a:hover::before {
  opacity: 1;
}

/* Icon spacing with animation */
#nav-desktop a i {
  margin-right: 8px;
  transition: transform 0.3s ease;
  font-size: 0.9rem;
}

#nav-desktop a:hover i {
  transform: scale(1.15);
}

/* Enhanced Color-coded navigation with gradients */
.nav-trade {
  color: #FF6B35 !important;
  border-color: rgba(255, 107, 53, 0.4) !important;
  background: linear-gradient(135deg, 
    rgba(255, 107, 53, 0.08), 
    rgba(255, 107, 53, 0.03)) !important;
}

.nav-rewards {
  color: #9C27B0 !important;
  border-color: rgba(156, 39, 176, 0.4) !important;
  background: linear-gradient(135deg, 
    rgba(156, 39, 176, 0.08), 
    rgba(156, 39, 176, 0.03)) !important;
}

.nav-tokenomics {
  color: #00BCD4 !important;
  border-color: rgba(0, 188, 212, 0.4) !important;
  background: linear-gradient(135deg, 
    rgba(0, 188, 212, 0.08), 
    rgba(0, 188, 212, 0.03)) !important;
}

/* Enhanced hover effects with glow */
.nav-trade:hover {
  background: linear-gradient(135deg, 
    rgba(255, 107, 53, 0.2), 
    rgba(255, 107, 53, 0.1)) !important;
  box-shadow: 0 4px 15px rgba(255, 107, 53, 0.25);
  transform: translateY(-2px);
}

.nav-rewards:hover {
  background: linear-gradient(135deg, 
    rgba(156, 39, 176, 0.2), 
    rgba(156, 39, 176, 0.1)) !important;
  box-shadow: 0 4px 15px rgba(156, 39, 176, 0.25);
  transform: translateY(-2px);
}

.nav-tokenomics:hover {
  background: linear-gradient(135deg, 
    rgba(0, 188, 212, 0.2), 
    rgba(0, 188, 212, 0.1)) !important;
  box-shadow: 0 4px 15px rgba(0, 188, 212, 0.25);
  transform: translateY(-2px);
}

/* Active state with glow */
#nav-desktop a.active {
  background: linear-gradient(135deg, 
    rgba(212, 167, 106, 0.25), 
    rgba(215, 77, 77, 0.15)) !important;
  color: white !important;
  box-shadow: 0 4px 20px rgba(212, 167, 106, 0.25);
  border-color: var(--rebel-gold) !important;
  transform: translateY(-1px);
}

/* ========== DROPDOWN STYLES ========== */
.dropdown {
  position: relative;
  display: inline-block;
}

.dropbtn {
  background: linear-gradient(135deg, 
    rgba(255, 215, 0, 0.1), 
    rgba(255, 152, 0, 0.05));
  color: #FFD700 !important;
  padding: 10px 20px;
  border: 1px solid rgba(255, 215, 0, 0.4);
  cursor: pointer;
  font-family: inherit;
  font-size: 0.95rem;
  display: flex;
  align-items: center;
  gap: 8px;
  min-height: 44px;
  min-width: 44px;
  text-decoration: none;
  border-radius: 30px;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  letter-spacing: 0.3px;
  background-color: transparent;
}

.dropbtn i {
  margin-right: 6px;
  transition: transform 0.3s ease;
}

.dropbtn:hover i {
  transform: rotate(15deg);
}

/* Dropdown Arrow with animation */
.dropbtn .dropdown-arrow {
  display: inline-block;
  margin-left: 4px;
  font-size: 0.7em;
  transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

.dropdown.active .dropbtn .dropdown-arrow,
.dropbtn.active .dropdown-arrow {
  transform: rotate(180deg);
}

.dropbtn:hover {
  background: linear-gradient(135deg, 
    rgba(255, 215, 0, 0.2), 
    rgba(255, 215, 0, 0.1)) !important;
  box-shadow: 0 4px 15px rgba(255, 215, 0, 0.25);
  transform: translateY(-2px);
  border-color: var(--rebel-gold) !important;
}

.dropdown.active .dropbtn,
.dropbtn.active {
  background: linear-gradient(135deg, 
    rgba(255, 215, 0, 0.25), 
    rgba(255, 215, 0, 0.15)) !important;
  box-shadow: 0 4px 20px rgba(255, 215, 0, 0.3);
}

/* Professional dropdown content */
.dropdown-content {
  display: none;
  position: absolute;
  right: 0;
  background: rgba(15, 15, 15, 0.98);
  min-width: 240px;
  border: 1px solid rgba(212, 167, 106, 0.3);
  border-radius: 16px;
  z-index: 1001;
  padding: 8px 0;
  backdrop-filter: blur(20px) saturate(180%);
  box-shadow: 
    0 10px 40px rgba(0, 0, 0, 0.6),
    0 0 0 1px rgba(255, 255, 255, 0.05) inset;
  overflow: hidden;
  margin-top: 8px;
}

/* Add subtle gradient border */
.dropdown-content::before {
  content: '';
  position: absolute;
  top: -1px;
  left: -1px;
  right: -1px;
  bottom: -1px;
  background: linear-gradient(135deg, 
    rgba(212, 167, 106, 0.3), 
    rgba(215, 77, 77, 0.3));
  border-radius: 17px;
  z-index: -1;
  opacity: 0.5;
}

.dropdown-content a {
  color: rgba(255, 255, 255, 0.9) !important;
  padding: 14px 24px;
  text-decoration: none;
  display: flex;
  align-items: center;
  gap: 12px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
  min-height: 52px;
  font-size: 0.95rem;
  transition: all 0.25s ease;
  position: relative;
  overflow: hidden;
  margin: 0 8px;
  border-radius: 10px;
  background: transparent !important;
  border: none !important;
}

.dropdown-content a:last-child {
  border-bottom: none;
}

/* Add color accent on hover */
.dropdown-content a::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 4px;
  background: currentColor;
  opacity: 0;
  transition: opacity 0.3s ease;
  border-radius: 2px;
}

.dropdown-content a:hover::before {
  opacity: 0.7;
}

.dropdown-content a:hover {
  background: rgba(255, 255, 255, 0.08) !important;
  padding-left: 28px;
  transform: translateX(4px);
  color: white !important;
}

.dropdown-content a i {
  width: 20px;
  text-align: center;
  font-size: 1.1rem;
  transition: transform 0.3s ease;
}

.dropdown-content a:hover i {
  transform: scale(1.2);
}

/* Dropdown item colors */
.dropdown-content a.nav-community { 
  color: #00BCD4 !important; /* Teal */
}

.dropdown-content a.nav-security { 
  color: #4CAF50 !important; /* Green */
}

.dropdown-content a.nav-whitepaper { 
  color: #795548 !important; /* Brown */
}

.dropdown-content a.nav-governance { 
  color: #FF9800 !important; /* Orange */
}

.dropdown-content a.nav-roadmap { 
  color: #FF5722 !important; /* Deep Orange */
}

.dropdown-content a.nav-integrity { 
  color: #607D8B !important; /* Blue Grey */
}

.dropdown-content a.nav-artwork { 
  color: #E91E63 !important; /* Magenta */
}

.dropdown-divider {
  height: 1px;
  background: linear-gradient(90deg, 
    transparent, 
    rgba(255, 255, 255, 0.1), 
    transparent);
  margin: 8px 20px;
}

/* ========== FIXED DROPDOWN BEHAVIOR ========== */

/* For desktop - show on hover OR when active */
@media (min-width: 769px) {
  .dropdown:hover .dropdown-content,
  .dropdown.active .dropdown-content {
    display: block;
    animation: fadeIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .dropdown:hover .dropbtn,
  .dropdown.active .dropbtn {
    background: linear-gradient(135deg, 
      rgba(255, 215, 0, 0.2), 
      rgba(255, 215, 0, 0.1)) !important;
    box-shadow: 0 4px 15px rgba(255, 215, 0, 0.2);
    transform: translateY(-2px);
  }
  
  /* Keep dropdown arrow visible when active */
  .dropdown.active .dropbtn .dropdown-arrow {
    display: inline-block !important;
    transform: rotate(180deg);
  }
  
  /* When dropdown is active via click, keep it visible when cursor leaves */
  .dropdown.active:hover .dropdown-content {
    display: block;
  }
  
  /* Fix z-index stacking */
  .dropdown.active {
    z-index: 1002;
  }
  
  .dropdown-content {
    pointer-events: auto;
  }
}

@keyframes fadeIn {
  from { 
    opacity: 0; 
    transform: translateY(-10px) scale(0.95); 
  }
  to { 
    opacity: 1; 
    transform: translateY(0) scale(1); 
  }
}

/* Add a visual indicator for active dropdown */
.dropdown.active .dropbtn {
  background: linear-gradient(135deg, 
    rgba(255, 215, 0, 0.25), 
    rgba(255, 215, 0, 0.15)) !important;
  border-color: var(--rebel-gold) !important;
  box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3) !important;
}

/* Ensure dropdown stays open when hovering over content */
.dropdown-content:hover {
  display: block !important;
}

/* Fix for dropdown closing too quickly */
.dropdown-content {
  transition: opacity 0.2s ease, transform 0.2s ease;
}

/* Add a small delay before closing on mouse leave for desktop */
@media (min-width: 769px) {
  .dropdown:not(.active) .dropdown-content {
    transition-delay: 0.1s;
  }
}

/* ========== BUY BUTTON & DROPDOWN ========== */
/* On desktop - push buy button to the right */
.buy-dropdown {
  position: relative;
  display: inline-block;
  margin-left: auto;
}

/* Buy Toggle Button */
.buy-toggle {
  background: linear-gradient(135deg, 
    var(--rebel-red), 
    var(--rebel-gold), 
    var(--rebel-red));
  background-size: 200% auto;
  color: white !important;
  padding: 12px 24px;
  border-radius: 30px;
  font-weight: 700;
  font-size: 1rem;
  letter-spacing: 0.5px;
  border: none;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  gap: 10px;
  min-width: 160px;
  justify-content: center;
  text-transform: uppercase;
  animation: gradientShift 3s ease infinite;
  box-shadow: 0 4px 20px rgba(215, 77, 77, 0.3);
  position: relative;
  z-index: 100;
  text-decoration: none !important;
}

.buy-toggle:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 25px rgba(215, 77, 77, 0.4);
  animation: none;
}

.buy-toggle.active {
  background: linear-gradient(135deg, 
    var(--rebel-gold), 
    var(--rebel-red), 
    var(--rebel-gold));
  border-bottom-left-radius: 0;
  border-bottom-right-radius: 0;
  box-shadow: 0 4px 20px rgba(215, 77, 77, 0.3);
}

.buy-toggle .dropdown-arrow {
  font-size: 0.8rem;
  margin-left: 5px;
  transition: transform 0.3s ease;
}

.buy-toggle.active .dropdown-arrow {
  transform: rotate(180deg);
}

/* Buy Options Dropdown */
.buy-options {
  display: none;
  position: absolute;
  top: 100%;
  right: 0;
  background: rgba(15, 15, 15, 0.98);
  backdrop-filter: blur(20px);
  border: 1px solid rgba(212, 167, 106, 0.3);
  border-radius: 0 0 20px 20px;
  padding: 20px;
  width: 320px;
  box-shadow: 0 20px 50px rgba(0, 0, 0, 0.7);
  z-index: 99;
  animation: slideDown 0.3s ease;
  margin-top: -1px;
  border-top: none;
}

.buy-dropdown.active .buy-options {
  display: block;
}

@keyframes gradientShift {
  0% { background-position: 0% center; }
  50% { background-position: 100% center; }
  100% { background-position: 0% center; }
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Primary Option */
.buy-option.primary {
  background: linear-gradient(135deg, 
    rgba(255, 107, 53, 0.1), 
    rgba(255, 107, 53, 0.05));
  border: 1px solid rgba(255, 107, 53, 0.3);
  border-radius: 12px;
  padding: 15px;
  margin-bottom: 15px;
}

.buy-option.primary:hover {
  background: linear-gradient(135deg, 
    rgba(255, 107, 53, 0.2), 
    rgba(255, 107, 53, 0.1));
  border-color: #FF6B35;
  transform: translateY(-2px);
}

/* Regular Options */
.buy-option {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 15px;
  border-radius: 10px;
  text-decoration: none !important;
  transition: all 0.2s ease;
  margin-bottom: 8px;
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid transparent;
  color: white !important;
}

.buy-option:hover {
  background: rgba(255, 255, 255, 0.08);
  transform: translateX(5px);
  border-color: rgba(255, 255, 255, 0.1);
}

/* Option Icon */
.option-icon {
  width: 40px;
  height: 40px;
  border-radius: 10px;
  background: rgba(255, 255, 255, 0.05);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.2rem;
  flex-shrink: 0;
  color: inherit;
}

.buy-option.primary .option-icon {
  background: rgba(255, 107, 53, 0.1);
  color: #FF6B35;
}

/* Option Content */
.option-content {
  flex: 1;
  text-align: left;
}

.option-title {
  font-weight: 700;
  font-size: 1rem;
  color: white;
  margin-bottom: 4px;
}

.option-desc {
  font-size: 0.8rem;
  color: rgba(255, 255, 255, 0.6);
}

/* Badges */
.option-badge {
  font-size: 0.7rem;
  font-weight: 700;
  padding: 4px 10px;
  border-radius: 20px;
  background: linear-gradient(135deg, #FF6B35, #FF9800);
  color: white !important;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  white-space: nowrap;
}

.option-badge.recommended {
  background: linear-gradient(135deg, #4CAF50, #2E7D32);
}

/* Option Groups */
.option-group {
  margin: 20px 0;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  padding-top: 15px;
}

.group-title {
  font-size: 0.9rem;
  font-weight: 600;
  color: var(--rebel-gold);
  margin-bottom: 12px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* Contract Display */
.contract-display {
  margin-top: 20px;
  padding-top: 15px;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.contract-label {
  font-size: 0.8rem;
  color: rgba(255, 255, 255, 0.7);
  margin-bottom: 8px;
}

.contract-value {
  font-family: 'Courier New', monospace;
  font-size: 0.75rem;
  color: white;
  background: rgba(255, 255, 255, 0.05);
  padding: 10px;
  border-radius: 8px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  word-break: break-all;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.contract-value:hover {
  background: rgba(255, 255, 255, 0.08);
  border-color: var(--rebel-gold);
}

.copy-icon {
  color: var(--rebel-gold);
  font-size: 0.9rem;
  margin-left: 10px;
  flex-shrink: 0;
}

.copy-message {
  font-size: 0.75rem;
  color: #4CAF50;
  margin-top: 5px;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.copy-message.show {
  opacity: 1;
}

/* ========== MOBILE STYLES (768px and below) ========== */
@media (max-width: 768px) {
  /* Mobile Navigation */
  .mobile-nav-toggle {
    display: flex;
    background: transparent;
    border: 2px solid rgba(212, 167, 106, 0.3);
    border-radius: 10px;
    font-size: 1.5rem;
    color: var(--rebel-gold);
    cursor: pointer;
    width: 44px;
    height: 44px;
    z-index: 1002;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    flex-shrink: 0;
  }
  
  .mobile-nav-toggle:hover {
    background: rgba(212, 167, 106, 0.1);
    transform: scale(1.05);
  }
  
  #nav-desktop {
    display: none;
    flex-direction: column;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    background: rgba(5, 5, 5, 0.98);
    padding: 100px var(--spacing-md) var(--spacing-2xl);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    z-index: 1001;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    backdrop-filter: blur(20px);
    align-items: stretch;
    margin: 0;
  }
  
  #nav-desktop.active {
    display: flex;
  }
  
  #nav-desktop a {
    padding: var(--spacing-lg) var(--spacing-xl);
    border-radius: 16px;
    margin-bottom: 0.75rem;
    font-size: 1.15rem;
    justify-content: flex-start;
    min-height: 60px;
    width: 100%;
    border: 1px solid rgba(255, 255, 255, 0.1);
  }
  
  #nav-desktop a i {
    margin-right: 15px;
    min-width: 28px;
    text-align: center;
    font-size: 1.3rem;
  }
  
  /* Brand adjustments */
  .brand-title {
    font-size: 1.5rem;
  }
  
  .brand-subtitle {
    font-size: 0.75rem;
    padding: 3px 10px;
  }
  
  /* Mobile Dropdown */
  .dropdown {
    width: 100%;
    margin-bottom: 0.75rem;
  }
  
  .dropdown-content {
    display: none;
    position: relative !important;
    background: rgba(10, 10, 10, 0.95) !important;
    border: 1px solid rgba(255, 255, 255, 0.15) !important;
    border-radius: 16px !important;
    margin: 15px 0 20px 0 !important;
    padding: 10px 0 !important;
    width: 100% !important;
    right: auto !important;
    left: 0 !important;
    box-shadow: none !important;
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1) !important;
    animation: none !important;
  }
  
  /* Show when active */
  .dropdown.active .dropdown-content,
  .dropdown-content.active {
    display: block !important;
    max-height: 600px !important;
    opacity: 1 !important;
    visibility: visible !important;
  }
  
  .dropdown-content a {
    padding: 18px 24px !important;
    margin: 4px 12px !important;
    border-radius: 12px !important;
    background: rgba(255, 255, 255, 0.05) !important;
    display: flex !important;
    align-items: center !important;
    min-height: 60px !important;
    border-left: 4px solid transparent !important;
    font-size: 1.05rem !important;
    -webkit-tap-highlight-color: rgba(212, 167, 106, 0.2);
  }
  
  .dropdown-content a:hover,
  .dropdown-content a:active {
    background: rgba(255, 255, 255, 0.1) !important;
    padding-left: 28px !important;
    border-left-color: currentColor !important;
  }
  
  .dropbtn {
    width: 100% !important;
    justify-content: space-between !important;
    padding: 20px 24px !important;
    margin: 5px 0 !important;
    border-radius: 16px !important;
    font-size: 1.15rem !important;
    -webkit-tap-highlight-color: rgba(212, 167, 106, 0.3);
  }
  
  /* Mobile Dropdown Arrow */
  .dropbtn .dropdown-arrow {
    margin-left: auto;
    font-size: 0.9em;
    transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  }
  
  .dropdown.active .dropbtn .dropdown-arrow,
  .dropbtn.active .dropdown-arrow {
    transform: rotate(180deg) scale(1.1) !important;
  }
  
  /* Visual feedback for active dropdown button */
  .dropdown.active .dropbtn,
  .dropbtn.active {
    background: linear-gradient(135deg, 
      rgba(255, 215, 0, 0.25), 
      rgba(255, 152, 0, 0.15)) !important;
    border-color: var(--rebel-gold) !important;
    box-shadow: 0 4px 15px rgba(255, 215, 0, 0.2) !important;
  }
  
  /* Mobile Buy Dropdown */
  .buy-dropdown {
    width: 100%;
    margin-top: 20px;
    margin-left: 0;
    order: 100; /* Move to bottom in mobile menu */
  }
  
  .buy-toggle {
    width: 100%;
    max-width: 100%;
    margin: 0 auto;
    padding: 18px 24px;
    font-size: 1.1rem;
  }
  
  .buy-options {
    position: fixed;
    top: auto;
    bottom: 0;
    left: 0;
    right: 0;
    width: 100%;
    max-width: 100%;
    border-radius: 20px 20px 0 0;
    margin-top: 0;
    border-top: 1px solid rgba(212, 167, 106, 0.3);
    animation: slideUpMobile 0.3s ease;
    max-height: 70vh;
    overflow-y: auto;
    z-index: 1002;
  }
  
  @keyframes slideUpMobile {
    from {
      opacity: 0;
      transform: translateY(100%);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  .buy-dropdown.active .buy-toggle {
    border-radius: 30px 30px 0 0;
  }
  
  /* Header container adjustments */
  .header-container {
    flex-wrap: wrap;
    gap: 10px;
  }
  
  /* Ensure brand takes available space */
  .brand-link {
    flex: 1;
  }
}

/* ========== DESKTOP SPECIFIC (769px and above) ========== */
@media (min-width: 769px) {
  /* Hide mobile toggle on desktop */
  .mobile-nav-toggle {
    display: none;
  }
  
  /* Show desktop navigation */
  #nav-desktop {
    display: flex;
  }
  
  /* Position buy dropdown on right */
  .buy-dropdown {
    margin-left: auto;
  }
}

/* ========== TOUCH DEVICE OPTIMIZATIONS ========== */
@media (hover: none) and (pointer: coarse) {
  .dropbtn:active,
  .dropdown-content a:active {
    transform: scale(0.98);
    transition: transform 0.1s ease;
  }
  
  #nav-desktop a:active {
    transform: scale(0.98);
  }
  
  .buy-toggle:active {
    transform: scale(0.98);
  }
}

/* ========== ACCESSIBILITY IMPROVEMENTS ========== */
.dropbtn:focus-visible,
.dropdown-content a:focus-visible,
#nav-desktop a:focus-visible,
.buy-toggle:focus-visible {
  outline: 3px solid var(--rebel-gold);
  outline-offset: 2px;
}

/* ========== PERFORMANCE OPTIMIZATIONS ========== */
.dropdown-content,
.dropbtn,
#nav-desktop a,
.brand-link {
  will-change: transform, opacity;
  backface-visibility: hidden;
}

/* ========== DARK MODE CONSISTENCY ========== */
@media (prefers-color-scheme: dark) {
  .dropdown-content {
    background: rgba(8, 8, 8, 0.98);
    border-color: rgba(212, 167, 106, 0.25);
  }
  
  #nav-desktop.active {
    background: rgba(3, 3, 3, 0.98);
  }
}

/* ========== HIGH CONTRAST MODE SUPPORT ========== */
@media (prefers-contrast: high) {
  #nav-desktop a {
    border-width: 2px;
  }
  
  .dropbtn {
    border-width: 2px;
  }
  
  .dropdown-content a {
    border-bottom-width: 2px;
  }
}

/* ========== PROFESSIONAL FOOTER STYLES ========== */
footer {
  background: rgba(5, 5, 5, 0.98);
  padding: var(--spacing-xl) var(--spacing-md);
  border-top: 1px solid rgba(212, 167, 106, 0.2);
  background-image: 
    linear-gradient(rgba(5, 5, 5, 0.98), rgba(5, 5, 5, 0.98)),
    linear-gradient(90deg, 
      rgba(215, 77, 77, 0.15) 0%, 
      rgba(212, 167, 106, 0.15) 50%, 
      rgba(215, 77, 77, 0.15) 100%);
  background-origin: border-box;
  background-clip: padding-box, border-box;
  position: relative;
  margin-top: auto;
}

.footer-container {
  max-width: 1400px;
  margin: 0 auto;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: var(--spacing-xl);
  position: relative;
}

/* Footer branding */
.footer-brand {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
}

.footer-logo {
  display: flex;
  align-items: center;
  gap: 12px;
  text-decoration: none;
  margin-bottom: 10px;
}

.footer-logo-img {
  height: 40px;
  width: 40px;
  border-radius: 10px;
  object-fit: contain;
  border: 1px solid rgba(212, 167, 106, 0.3);
  padding: 3px;
  background: rgba(0, 0, 0, 0.6);
}

.footer-logo-text {
  font-size: 1.5rem;
  font-weight: 900;
  background: linear-gradient(90deg, 
    var(--rebel-red) 0%, 
    var(--rebel-gold) 50%, 
    var(--rebel-red) 100%);
  background-size: 200% auto;
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
}

.footer-tagline {
  font-size: 0.9rem;
  color: rgba(255, 255, 255, 0.7);
  line-height: 1.5;
  margin-bottom: var(--spacing-sm);
}

/* Footer social links */
.footer-social {
  display: flex;
  gap: 12px;
  margin-top: var(--spacing-sm);
}

.social-link {
  width: 40px;
  height: 40px;
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  color: var(--rebel-gold);
  text-decoration: none;
  transition: all 0.3s ease;
  font-size: 1.1rem;
}

.social-link:hover {
  background: rgba(212, 167, 106, 0.1);
  transform: translateY(-3px);
  border-color: var(--rebel-gold);
  box-shadow: 0 5px 15px rgba(212, 167, 106, 0.2);
}

/* Footer sections */
.footer-section h3 {
  font-size: 1.1rem;
  font-weight: 700;
  color: var(--rebel-gold);
  margin-bottom: var(--spacing-md);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.footer-links {
  list-style: none;
  padding: 0;
  margin: 0;
}

.footer-links li {
  margin-bottom: 10px;
}

.footer-links a {
  color: rgba(255, 255, 255, 0.7);
  text-decoration: none;
  font-size: 0.95rem;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  gap: 8px;
}

.footer-links a:hover {
  color: var(--rebel-gold);
  transform: translateX(5px);
}

.footer-links a i {
  font-size: 0.9rem;
  width: 20px;
}

/* Footer newsletter */
.newsletter-form {
  margin-top: var(--spacing-md);
}

.newsletter-form p {
  color: rgba(255, 255, 255, 0.7);
  font-size: 0.9rem;
  margin-bottom: var(--spacing-sm);
}

.form-group {
  display: flex;
  gap: 10px;
  margin-bottom: var(--spacing-sm);
}

.form-group input {
  flex: 1;
  padding: 12px 16px;
  border-radius: 8px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  background: rgba(255, 255, 255, 0.05);
  color: white;
  font-size: 0.95rem;
  transition: all 0.3s ease;
}

.form-group input:focus {
  outline: none;
  border-color: var(--rebel-gold);
  box-shadow: 0 0 0 2px rgba(212, 167, 106, 0.2);
}

.form-group button {
  padding: 12px 20px;
  border-radius: 8px;
  border: none;
  background: linear-gradient(135deg, var(--rebel-red), var(--rebel-gold));
  color: white;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  white-space: nowrap;
}

.form-group button:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(215, 77, 77, 0.3);
}

.privacy-note {
  font-size: 0.8rem;
  color: rgba(255, 255, 255, 0.5);
  margin-top: 5px;
}

/* Footer bottom */
.footer-bottom {
  grid-column: 1 / -1;
  margin-top: var(--spacing-xl);
  padding-top: var(--spacing-lg);
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  align-items: center;
  gap: var(--spacing-md);
}

.copyright {
  color: rgba(255, 255, 255, 0.5);
  font-size: 0.9rem;
}

.footer-legal {
  display: flex;
  gap: var(--spacing-lg);
}

.footer-legal a {
  color: rgba(255, 255, 255, 0.5);
  text-decoration: none;
  font-size: 0.9rem;
  transition: color 0.3s ease;
}

.footer-legal a:hover {
  color: var(--rebel-gold);
}

/* Back to top button */
.back-to-top {
  position: fixed;
  bottom: 30px;
  right: 30px;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--rebel-red), var(--rebel-gold));
  color: white;
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.2rem;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
  transition: all 0.3s ease;
  opacity: 0;
  visibility: hidden;
  transform: translateY(20px);
  z-index: 999;
}

.back-to-top.visible {
  opacity: 1;
  visibility: visible;
  transform: translateY(0);
}

.back-to-top:hover {
  transform: translateY(-5px);
  box-shadow: 0 6px 25px rgba(215, 77, 77, 0.4);
}

/* Mobile footer adjustments */
@media (max-width: 768px) {
  footer {
    padding: var(--spacing-lg) var(--spacing-sm);
  }
  
  .footer-container {
    grid-template-columns: 1fr;
    gap: var(--spacing-lg);
  }
  
  .footer-bottom {
    flex-direction: column;
    text-align: center;
    gap: var(--spacing-sm);
  }
  
  .footer-legal {
    flex-wrap: wrap;
    justify-content: center;
    gap: var(--spacing-md);
  }
  
  .form-group {
    flex-direction: column;
  }
  
  .form-group button {
    width: 100%;
  }
  
  .back-to-top {
    bottom: 20px;
    right: 20px;
    width: 45px;
    height: 45px;
  }
}
